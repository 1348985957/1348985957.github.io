<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<meta name="keywords" content="点赞功能" />
<meta name="description" content="首先后台执行SQL ALTERTABLEdede_archivesADDzanint(11)NOTNULLDEFAULT'0'AFTERweight; 也就是在 dede_archives 表中增加 zan 这个字段,加到weight这个字段后边。 然后再次执行 CREATETABLEIFNOTEXISTS`dede_zan`( `id`int(" />
<title>dede简单点赞功能开发-（自适应手机版）响应式新闻资讯网站源码 HTML5个人技术博客类织梦模板 - AB模板网 - Www.AdminBuy.Cn</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="/html5_blue/images/favicon.ico" />
<link rel='stylesheet' id='_common-css'  href='/include/FCKeditor/editor/css/fck_editorarea.css' type='text/css' media='all' />
<link rel="stylesheet" type="text/css" media="all" href="/html5_blue/css/style.css" />
<link rel="stylesheet" type="text/css"  href="/html5_blue/css/font-awesome.min.css"/>
<script type="text/javascript" src="/html5_blue/js/jquery.min.js"></script>
<script type="text/javascript" src="/html5_blue/js/responsiveslides.min.js"></script>
<script type="text/javascript" src="/html5_blue/js/yycm.js"></script>
<link href="/include/kindeditor/plugins/runCode/runCode.css" rel="stylesheet" type="text/css" />
<script language="javascript" type="text/javascript" src="/include/kindeditor/plugins/runCode/zztuku_runCode.js"></script>
<script language="javascript" type="text/javascript" src="/include/js/dedeajax2.js"></script>
</head>
<body>
<div class="top"> <span href="#" class="totop"></span>
  <div class="topmenu">
    <ul id="menu-top" class="wrap">
      <li><a>本站有AB模板网提供技术支持 Www.AdminBuy.Cn</a></li>
    </ul>
  </div>
  <div class="wrap page-header">
    <h1 style="margin-top: 20px;"><a href="/" title="首页"><img src="/html5_blue/images/logo.png" width="" height="" border="0" alt=""></a></h1>
    <span>我的网站，可以后台设置此处文字！</span>
    <div class="contact">
      <li><a href="http://wpa.qq.com/msgrd?v=3&uin=9490489&site=qq&menu=yes" target="_blank" title="QQ联系"><i class="fa fa-qq fa-2x"></i></a></li>
      <li><a href="http://www.weibo.com/gooxao" target="_blank" title="新浪微博"><i class="fa fa-weibo fa-2x"></i></a></li>
      <li><a href="http://t.qq.com/gooxao2" target="_blank" title="腾讯微博"><i class="fa fa-pinterest-square fa-2x"></i></a></li>
    </div>
  </div>
  <div class="nav">
    <div class="wrap zwrap">
      <div class="navbar-header">
        <li class="navbar-toggle"> <i class="fa fa-list fa-2x"></i> </li>
        <li style="float:right;display:inline-block">
          <div class="toggle-search"><i class="fa fa-search fa-2x"></i></div>
        </li>
        <li style="float:right;">
          <div class="search-expand">
            <div class="search-expand-inner">
              <form onSubmit="return checkSearchForm()" method="post" name="formsearch" id="searchform" class="searchform themeform" action="/plus/search.php" >
                <input type="text" class="search" name="q" onblur="if(this.value=='')this.value='按回车键搜索...';" onfocus="if(this.value=='按回车键搜索...')this.value='';" value="按回车键搜索..." placeholder="按回车键搜索">
                <input type="hidden" value="title" name="show">
                <input type="hidden" value="1" name="tempid">
                <input type="hidden" value="news" name="tbname">
                <input name="mid" value="1" type="hidden">
                <input name="submit" value="search" type="hidden">
              </form>
            </div>
          </div>
        </li>
      </div>
      <div class="navbar-collapse">
        <ul>
          <li class="menu-item current_page_item"><a href="/">首页</a></li>
          <li class="menu-item "><a href="/html/">HTML技巧</a>
            <ul class="sub-menu">
              
            </ul>
          </li><li class="menu-item "><a href="/cms/">Cms文章</a>
            <ul class="sub-menu">
              
            </ul>
          </li><li class="menu-item "><a href="/News/">随心笔记</a>
            <ul class="sub-menu">
              
            </ul>
          </li><li class="menu-item "><a href="/liuyan/">给我留言</a>
            <ul class="sub-menu">
              
            </ul>
          </li><li class="menu-item "><a href="/fm/">关于博主</a>
            <ul class="sub-menu">
              
            </ul>
          </li>
        </ul>
      </div>
    </div>
  </div>
  <div class="notic">
    <div class="wrap subnotic"><i class="fa fa-bullhorn"></i> 该模板为AB模板网VIP资源，加入VIP即可下载全站所有模板，本站也承接仿站业务，联系QQ：94490489 </div>
  </div>
</div>

<div class="wrap" >
  <div class="main">
    <div class="article">
      <div class="map"><span> 当前位置：<a href='http://127.0.0.4/'>首页</a> > <a href='/cms/'>Cms文章</a> > 正文 </span> </div>
      <div class="title">
        <h1>dede简单点赞功能开发</h1>
        <div class="subtitle"> <span><i class="fa fa-clock-o"></i>06-05</span><span><i class="fa fa-eye"></i> <script src="/plus/count.php?view=yes&aid=9&mid=1"type='text/javascript' language="javascript"></script></span><span><i class="fa fa-folder-o"></i> <a href="" rel="category tag">Cms文章</a> </span><span> <i class="fa fa-tags"></i> </span> </div>
      </div>
   		<p>&nbsp;<span style="color: rgb(51, 51, 51); font-family: arial, 宋体, sans-serif, 'Microsoft YaHei', tahoma; line-height: 24px; font-size: 16px; text-indent: 30px; background-color: rgb(247, 252, 248);">首先后台执行SQL</span></p>
<pre style="box-sizing: border-box; font-family: 'courier new'; font-size: 12px; width: 724.672px; margin-top: 20px; margin-bottom: 20px; padding-right: 20px; padding-left: 20px; line-height: 20px; color: rgb(248, 248, 212); word-wrap: break-word; border: none; border-radius: 4px; font-stretch: normal;"><ol class="dp-xml" style="box-sizing: border-box; margin-bottom: 30px; margin-left: 10px; border-left-color: rgb(255, 95, 83); color: rgb(92, 92, 92);"><li class="alt" style="box-sizing: border-box; color: rgb(255, 255, 255);"><span style="box-sizing: border-box;">ALTER&nbsp;TABLE&nbsp;dede_archives&nbsp;ADD&nbsp;zan&nbsp;int(11)&nbsp;NOT&nbsp;NULL&nbsp;DEFAULT&nbsp;'0'&nbsp;AFTER&nbsp;weight;&nbsp;</span></li></ol></pre>
<p style="box-sizing: border-box; margin: 0px 0px 30px; text-indent: 30px; color: rgb(85, 85, 85); font-family: 'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 16px; line-height: 27px;"><span style="box-sizing: border-box; color: rgb(51, 51, 51); font-family: arial, 宋体, sans-serif, 'Microsoft YaHei', tahoma; line-height: 24px; background-color: rgb(247, 252, 248);">也就是在 dede_archives 表中增加 zan &nbsp;这个字段,加到weight这个字段后边。</span></p>
<p style="box-sizing: border-box; margin: 0px 0px 30px; text-indent: 30px; color: rgb(85, 85, 85); font-family: 'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 16px; line-height: 27px;"><span style="box-sizing: border-box; color: rgb(51, 51, 51); font-family: arial, 宋体, sans-serif, 'Microsoft YaHei', tahoma; line-height: 24px; background-color: rgb(247, 252, 248);">然后再次执行</span></p>
<pre style="box-sizing: border-box; font-family: 'courier new'; font-size: 12px; width: 724.672px; margin-top: 20px; margin-bottom: 20px; padding-right: 20px; padding-left: 20px; line-height: 20px; color: rgb(248, 248, 212); word-wrap: break-word; border: none; border-radius: 4px; font-stretch: normal;"><ol class="dp-xml" style="box-sizing: border-box; margin-bottom: 30px; margin-left: 10px; border-left-color: rgb(255, 95, 83); color: rgb(92, 92, 92);"><li class="alt" style="box-sizing: border-box; color: rgb(255, 255, 255);"><span style="box-sizing: border-box;">CREATE&nbsp;TABLE&nbsp;IF&nbsp;NOT&nbsp;EXISTS&nbsp;`dede_zan`&nbsp;(&nbsp;&nbsp;</span></li><li style="box-sizing: border-box;"><span style="box-sizing: border-box;">&nbsp;&nbsp;`id`&nbsp;int(11)&nbsp;NOT&nbsp;NULL&nbsp;AUTO_INCREMENT,&nbsp;&nbsp;</span></li><li class="alt" style="box-sizing: border-box; color: rgb(255, 255, 255);"><span style="box-sizing: border-box;">&nbsp;&nbsp;`aid`&nbsp;int(11)&nbsp;NOT&nbsp;NULL,&nbsp;&nbsp;</span></li><li style="box-sizing: border-box;"><span style="box-sizing: border-box;">&nbsp;&nbsp;`ip`&nbsp;varchar(40)&nbsp;NOT&nbsp;NULL,&nbsp;&nbsp;</span></li><li class="alt" style="box-sizing: border-box; color: rgb(255, 255, 255);"><span style="box-sizing: border-box;">&nbsp;&nbsp;PRIMARY&nbsp;KEY&nbsp;(`id`)&nbsp;&nbsp;</span></li><li style="box-sizing: border-box;"><span style="box-sizing: border-box;">)&nbsp;<span class="attribute" style="box-sizing: border-box;">ENGINE</span><span style="box-sizing: border-box;">=</span><span class="attribute-value" style="box-sizing: border-box;">MyISAM</span><span style="box-sizing: border-box;">&nbsp;&nbsp;DEFAULT&nbsp;</span><span class="attribute" style="box-sizing: border-box;">CHARSET</span><span style="box-sizing: border-box;">=</span><span class="attribute-value" style="box-sizing: border-box;">utf8</span><span style="box-sizing: border-box;">&nbsp;</span></span></li></ol></pre>
<p style="box-sizing: border-box; margin: 0px 0px 30px; text-indent: 30px; color: rgb(85, 85, 85); font-family: 'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 16px; line-height: 27px;"><span style="box-sizing: border-box; color: rgb(51, 51, 51); font-family: arial, 宋体, sans-serif, 'Microsoft YaHei', tahoma; line-height: 24px; background-color: rgb(247, 252, 248);">这个表是保存被赞的文档aid 及IP的,为了检测是否赞过的IP</span><span style="box-sizing: border-box; color: rgb(51, 51, 51); font-family: arial, 宋体, sans-serif, 'Microsoft YaHei', tahoma; line-height: 24px; background-color: rgb(247, 252, 248);">&nbsp;</span></p>
<p style="box-sizing: border-box; margin: 0px; text-indent: 30px; font-size: 16px; word-wrap: break-word; padding: 0px; color: rgb(51, 51, 51); font-family: arial, 宋体, sans-serif, 'Microsoft YaHei', tahoma; line-height: 24px; background-color: rgb(247, 252, 248);">然后在include/extend.func.php 中增加以下函数,用来获取文档被赞次数的</p>
<pre style="box-sizing: border-box; font-family: 'courier new'; font-size: 12px; width: 724.672px; margin-top: 20px; margin-bottom: 20px; padding-right: 20px; padding-left: 20px; line-height: 20px; color: rgb(248, 248, 212); word-wrap: break-word; border: none; border-radius: 4px; font-stretch: normal;"><ol class="dp-xml" style="box-sizing: border-box; margin-bottom: 30px; margin-left: 10px; border-left-color: rgb(255, 95, 83); color: rgb(92, 92, 92);"><li class="alt" style="box-sizing: border-box; color: rgb(255, 255, 255);"><span style="box-sizing: border-box;">function&nbsp;zan($aid)&nbsp;</span></li><li style="box-sizing: border-box;"><span style="box-sizing: border-box;">{&nbsp;</span></li><li class="alt" style="box-sizing: border-box; color: rgb(255, 255, 255);"><span style="box-sizing: border-box;">&nbsp;&nbsp;&nbsp;&nbsp;global&nbsp;$dsql;&nbsp;</span></li><li style="box-sizing: border-box;"><span style="box-sizing: border-box;">&nbsp;&nbsp;&nbsp;&nbsp;$<span class="attribute" style="box-sizing: border-box;">row</span><span style="box-sizing: border-box;">&nbsp;=&nbsp;$dsql-</span><span class="tag" style="box-sizing: border-box;">&gt;</span><span style="box-sizing: border-box;">GetOne(&quot;Select&nbsp;id,zan&nbsp;From&nbsp;dede_archives&nbsp;where&nbsp;</span><span class="attribute" style="box-sizing: border-box;">id</span><span style="box-sizing: border-box;">=</span><span class="attribute-value" style="box-sizing: border-box;">'&quot;.$aid.&quot;'</span><span style="box-sizing: border-box;">&quot;);&nbsp;</span></span></li><li class="alt" style="box-sizing: border-box; color: rgb(255, 255, 255);"><span style="box-sizing: border-box;">&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$row['zan'];&nbsp;</span></li><li style="box-sizing: border-box;"><span style="box-sizing: border-box;">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;</span></li></ol></pre>
<p style="box-sizing: border-box; margin: 0px 0px 30px; text-indent: 30px; color: rgb(85, 85, 85); font-family: 'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 16px; line-height: 27px;"><span style="box-sizing: border-box; color: rgb(51, 51, 51); font-family: arial, 宋体, sans-serif, 'Microsoft YaHei', tahoma; line-height: 24px; background-color: rgb(247, 252, 248);">打开模板templets/default/article_article.htm加入css</span></p>
<pre style="box-sizing: border-box; font-family: 'courier new'; font-size: 12px; width: 724.672px; margin-top: 20px; margin-bottom: 20px; padding-right: 20px; padding-left: 20px; line-height: 20px; color: rgb(248, 248, 212); word-wrap: break-word; border: none; border-radius: 4px; font-stretch: normal;"><ol class="dp-xml" style="box-sizing: border-box; margin-bottom: 30px; margin-left: 10px; border-left-color: rgb(255, 95, 83); color: rgb(92, 92, 92);"><li class="alt" style="box-sizing: border-box; color: rgb(255, 255, 255);"><span style="box-sizing: border-box;">.zan&nbsp;p{&nbsp;</span></li><li style="box-sizing: border-box;"><span style="box-sizing: border-box;">background:#000;&nbsp;opacity:.8;filter:alpha(<span class="attribute" style="box-sizing: border-box;">opacity</span><span style="box-sizing: border-box;">=</span><span class="attribute-value" style="box-sizing: border-box;">80</span><span style="box-sizing: border-box;">);}&nbsp;&nbsp;</span></span></li><li class="alt" style="box-sizing: border-box; color: rgb(255, 255, 255);"><span style="box-sizing: border-box;">.zan&nbsp;p&nbsp;a{padding-left:30px;&nbsp;height:24px;&nbsp;background:url(/images/heart.png)&nbsp;no-repeat&nbsp;&nbsp;&nbsp;</span></li><li style="box-sizing: border-box;"><span style="box-sizing: border-box;">4px&nbsp;-1px;color:#fff;&nbsp;font-weight:bold;&nbsp;font-size:14px}&nbsp;&nbsp;</span></li><li class="alt" style="box-sizing: border-box; color: rgb(255, 255, 255);"><span style="box-sizing: border-box;">.zan&nbsp;p&nbsp;a:hover{background-position:4px&nbsp;-25px;text-decoration:none}&nbsp;</span></li></ol></pre>
<p style="box-sizing: border-box; margin: 0px; text-indent: 30px; font-size: 16px; word-wrap: break-word; padding: 0px; color: rgb(51, 51, 51); font-family: arial, 宋体, sans-serif, 'Microsoft YaHei', tahoma; line-height: 24px; background-color: rgb(247, 252, 248);">加入JS,记得引入jquery.js</p>
<p style="box-sizing: border-box; margin: 0px; text-indent: 30px; font-size: 16px; word-wrap: break-word; padding: 0px; color: rgb(51, 51, 51); font-family: arial, 宋体, sans-serif, 'Microsoft YaHei', tahoma; line-height: 24px; background-color: rgb(247, 252, 248);">&lt;script type=&quot;text/javascript&quot; src=&quot;/jquery.js&quot;&gt;&lt;/script&gt;</p>
<pre style="box-sizing: border-box; font-family: 'courier new'; font-size: 12px; width: 724.672px; margin-top: 20px; margin-bottom: 20px; padding-right: 20px; padding-left: 20px; line-height: 20px; color: rgb(248, 248, 212); word-wrap: break-word; border: none; border-radius: 4px; font-stretch: normal;"><ol class="dp-xml" style="box-sizing: border-box; margin-bottom: 30px; margin-left: 10px; border-left-color: rgb(255, 95, 83); color: rgb(92, 92, 92);"><li class="alt" style="box-sizing: border-box; color: rgb(255, 255, 255);"><span style="box-sizing: border-box;">$(function(){&nbsp;&nbsp;</span></li><li style="box-sizing: border-box;"><span style="box-sizing: border-box;">&nbsp;&nbsp;&nbsp;&nbsp;$(&quot;p&nbsp;a&quot;).click(function(){&nbsp;&nbsp;</span></li><li class="alt" style="box-sizing: border-box; color: rgb(255, 255, 255);"><span style="box-sizing: border-box;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;<span class="attribute" style="box-sizing: border-box;">zan</span><span style="box-sizing: border-box;">&nbsp;=&nbsp;$(this);&nbsp;&nbsp;</span></span></li><li style="box-sizing: border-box;"><span style="box-sizing: border-box;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;<span class="attribute" style="box-sizing: border-box;">id</span><span style="box-sizing: border-box;">&nbsp;=&nbsp;</span><span class="attribute-value" style="box-sizing: border-box;">zan</span><span style="box-sizing: border-box;">.attr(&quot;rel&quot;);&nbsp;//对应id&nbsp;&nbsp;</span></span></li><li class="alt" style="box-sizing: border-box; color: rgb(255, 255, 255);"><span style="box-sizing: border-box;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;zan.fadeOut(300);&nbsp;//渐隐效果&nbsp;&nbsp;</span></li><li style="box-sizing: border-box;"><span style="box-sizing: border-box;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$.ajax({&nbsp;&nbsp;</span></li><li class="alt" style="box-sizing: border-box; color: rgb(255, 255, 255);"><span style="box-sizing: border-box;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type:&quot;POST&quot;,&nbsp;&nbsp;</span></li><li style="box-sizing: border-box;"><span style="box-sizing: border-box;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;url:&quot;/zan.php&quot;,&nbsp;&nbsp;</span></li><li class="alt" style="box-sizing: border-box; color: rgb(255, 255, 255);"><span style="box-sizing: border-box;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data:&quot;<span class="attribute" style="box-sizing: border-box;">id</span><span style="box-sizing: border-box;">=&quot;+id,&nbsp;&nbsp;</span></span></li><li style="box-sizing: border-box;"><span style="box-sizing: border-box;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cache:false,&nbsp;//不缓存此页面&nbsp;&nbsp;</span></li><li class="alt" style="box-sizing: border-box; color: rgb(255, 255, 255);"><span style="box-sizing: border-box;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;success:function(data){&nbsp;&nbsp;</span></li><li style="box-sizing: border-box;"><span style="box-sizing: border-box;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;zan.html(data);&nbsp;&nbsp;</span></li><li class="alt" style="box-sizing: border-box; color: rgb(255, 255, 255);"><span style="box-sizing: border-box;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;zan.fadeIn(300);&nbsp;//渐显效果&nbsp;&nbsp;</span></li><li style="box-sizing: border-box;"><span style="box-sizing: border-box;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li class="alt" style="box-sizing: border-box; color: rgb(255, 255, 255);"><span style="box-sizing: border-box;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});&nbsp;&nbsp;</span></li><li style="box-sizing: border-box;"><span style="box-sizing: border-box;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;false;&nbsp;&nbsp;</span></li><li class="alt" style="box-sizing: border-box; color: rgb(255, 255, 255);"><span style="box-sizing: border-box;">&nbsp;&nbsp;&nbsp;&nbsp;});&nbsp;&nbsp;</span></li><li style="box-sizing: border-box;"><span style="box-sizing: border-box;">});&nbsp;</span></li></ol></pre>
<p style="box-sizing: border-box; margin: 0px 0px 30px; text-indent: 30px; color: rgb(85, 85, 85); font-family: 'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 16px; line-height: 27px;"><span style="box-sizing: border-box; color: rgb(51, 51, 51); font-family: arial, 宋体, sans-serif, 'Microsoft YaHei', tahoma; line-height: 24px; background-color: rgb(247, 252, 248);">加入</span></p>
<pre style="box-sizing: border-box; font-family: 'courier new'; font-size: 12px; width: 724.672px; margin-top: 20px; margin-bottom: 20px; padding-right: 20px; padding-left: 20px; line-height: 20px; color: rgb(248, 248, 212); word-wrap: break-word; border: none; border-radius: 4px; font-stretch: normal;"><ol class="dp-xml" style="box-sizing: border-box; margin-bottom: 30px; margin-left: 10px; border-left-color: rgb(255, 95, 83); color: rgb(92, 92, 92);"><li class="alt" style="box-sizing: border-box; color: rgb(255, 255, 255);"><span style="box-sizing: border-box;"><span class="tag" style="box-sizing: border-box;">&lt;</span><span class="tag-name" style="box-sizing: border-box;">div</span><span style="box-sizing: border-box;">&nbsp;</span><span class="attribute" style="box-sizing: border-box;">class</span><span style="box-sizing: border-box;">=</span><span class="attribute-value" style="box-sizing: border-box;">&quot;zan&quot;</span><span class="tag" style="box-sizing: border-box;">&gt;</span></span></li><li class="alt" style="box-sizing: border-box; color: rgb(255, 255, 255);"><span style="box-sizing: border-box;"><span class="tag" style="box-sizing: border-box;">&lt;</span><span class="tag-name" style="box-sizing: border-box;">p</span><span class="tag" style="box-sizing: border-box;">&gt;</span></span></li><li class="alt" style="box-sizing: border-box; color: rgb(255, 255, 255);"><span style="box-sizing: border-box;"><span class="tag" style="box-sizing: border-box;">&lt;</span><span class="tag-name" style="box-sizing: border-box;">a</span><span style="box-sizing: border-box;">&nbsp;</span><span class="attribute" style="box-sizing: border-box;">href</span><span style="box-sizing: border-box;">=</span><span class="attribute-value" style="box-sizing: border-box;">&quot;#&quot;</span><span style="box-sizing: border-box;">&nbsp;</span></span><span style="box-sizing: border-box;"><span class="attribute" style="box-sizing: border-box;">title</span><span style="box-sizing: border-box;">=&quot;赞一个&nbsp;&quot;</span><span class="attribute-value" style="box-sizing: border-box;">class</span><span style="box-sizing: border-box;">=&quot;img_on&quot;&nbsp;</span><span class="attribute" style="box-sizing: border-box;">rel</span><span style="box-sizing: border-box;">=</span><span class="attribute-value" style="box-sizing: border-box;">&quot;{dede:field.id/}&quot;</span><span class="tag" style="box-sizing: border-box;">&gt;</span></span></li><li class="alt" style="box-sizing: border-box; color: rgb(255, 255, 255);"><span style="box-sizing: border-box;"><span style="box-sizing: border-box;">{dede:field.id&nbsp;</span><span class="attribute" style="box-sizing: border-box;">function</span><span style="box-sizing: border-box;">=</span><span class="attribute-value" style="box-sizing: border-box;">&quot;zan(@me)&quot;</span><span style="box-sizing: border-box;">/}</span><span class="tag" style="box-sizing: border-box;">&lt;/</span><span class="tag-name" style="box-sizing: border-box;">a</span><span class="tag" style="box-sizing: border-box;">&gt;</span></span></li><li class="alt" style="box-sizing: border-box; color: rgb(255, 255, 255);"><span style="box-sizing: border-box;"><span class="tag" style="box-sizing: border-box;">&lt;/</span><span class="tag-name" style="box-sizing: border-box;">p</span><span class="tag" style="box-sizing: border-box;">&gt;</span><span class="tag" style="box-sizing: border-box;">&lt;/</span><span class="tag-name" style="box-sizing: border-box;">div</span><span class="tag" style="box-sizing: border-box;">&gt;</span><span style="box-sizing: border-box;">&nbsp;</span></span></li></ol></pre>
<p style="box-sizing: border-box; margin: 0px 0px 30px; text-indent: 30px; color: rgb(85, 85, 85); font-family: 'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 16px; line-height: 27px;"><span style="box-sizing: border-box; color: rgb(51, 51, 51); font-family: arial, 宋体, sans-serif, 'Microsoft YaHei', tahoma; line-height: 24px; background-color: rgb(247, 252, 248);">建立zan.php 放到根目录</span></p>
<pre style="box-sizing: border-box; font-family: 'courier new'; font-size: 12px; width: 724.672px; margin-top: 20px; margin-bottom: 20px; padding-right: 20px; padding-left: 20px; line-height: 20px; color: rgb(248, 248, 212); word-wrap: break-word; border: none; border-radius: 4px; font-stretch: normal;"><ol class="dp-xml" style="box-sizing: border-box; margin-bottom: 30px; margin-left: 10px; border-left-color: rgb(255, 95, 83); color: rgb(92, 92, 92);"><li class="alt" style="box-sizing: border-box; color: rgb(255, 255, 255);"><span style="box-sizing: border-box;"><span class="tag" style="box-sizing: border-box;">&lt;?</span><span class="tag-name" style="box-sizing: border-box;">php</span><span style="box-sizing: border-box;">&nbsp;</span></span></li><li style="box-sizing: border-box;"><span style="box-sizing: border-box;">require_once&nbsp;(dirname(__FILE__)&nbsp;.&nbsp;&quot;/include/common.inc.php&quot;);&nbsp;</span></li><li class="alt" style="box-sizing: border-box; color: rgb(255, 255, 255);"><span style="box-sizing: border-box;">$<span class="attribute" style="box-sizing: border-box;">ip</span><span style="box-sizing: border-box;">&nbsp;=</span><span class="attribute-value" style="box-sizing: border-box;">getip</span><span style="box-sizing: border-box;">();&nbsp;//获取用户IP&nbsp;&nbsp;</span></span></li><li style="box-sizing: border-box;"><span style="box-sizing: border-box;">$<span class="attribute" style="box-sizing: border-box;">id</span><span style="box-sizing: border-box;">&nbsp;=&nbsp;$_POST['id'];&nbsp;&nbsp;</span></span></li><li class="alt" style="box-sizing: border-box; color: rgb(255, 255, 255);"><span style="box-sizing: border-box;">if(!isset($id)&nbsp;||&nbsp;empty($id))&nbsp;exit;&nbsp;&nbsp;</span></li><li style="box-sizing: border-box;"><span style="box-sizing: border-box;">&nbsp;&nbsp;</span></li><li class="alt" style="box-sizing: border-box; color: rgb(255, 255, 255);"><span style="box-sizing: border-box;">//查询已赞过的IP&nbsp;</span></li><li style="box-sizing: border-box;"><span style="box-sizing: border-box;">$dsql-<span class="tag" style="box-sizing: border-box;">&gt;</span><span style="box-sizing: border-box;">SetQuery(&quot;SELECT&nbsp;ip&nbsp;FROM&nbsp;dede_zan&nbsp;&nbsp;WHERE&nbsp;</span><span class="attribute" style="box-sizing: border-box;">aid</span><span style="box-sizing: border-box;">=</span><span class="attribute-value" style="box-sizing: border-box;">'&quot;.$id.&quot;'</span><span style="box-sizing: border-box;">&nbsp;and&nbsp;</span><span class="attribute" style="box-sizing: border-box;">ip</span><span style="box-sizing: border-box;">=</span><span class="attribute-value" style="box-sizing: border-box;">'$ip'</span><span style="box-sizing: border-box;">&quot;);&nbsp;</span></span></li><li class="alt" style="box-sizing: border-box; color: rgb(255, 255, 255);"><span style="box-sizing: border-box;">$dsql-<span class="tag" style="box-sizing: border-box;">&gt;</span><span style="box-sizing: border-box;">Execute();&nbsp;</span></span></li><li style="box-sizing: border-box;"><span style="box-sizing: border-box;">$<span class="attribute" style="box-sizing: border-box;">count</span><span style="box-sizing: border-box;">&nbsp;=&nbsp;$dsql-</span><span class="tag" style="box-sizing: border-box;">&gt;</span><span style="box-sizing: border-box;">GetTotalRow();&nbsp;</span></span></li><li class="alt" style="box-sizing: border-box; color: rgb(255, 255, 255);"><span style="box-sizing: border-box;">&nbsp;&nbsp;</span></li><li style="box-sizing: border-box;"><span style="box-sizing: border-box;">if($<span class="attribute" style="box-sizing: border-box;">count</span><span style="box-sizing: border-box;">==0){&nbsp;//如果没有记录&nbsp;&nbsp;</span></span></li><li class="alt" style="box-sizing: border-box; color: rgb(255, 255, 255);"><span style="box-sizing: border-box;">&nbsp;&nbsp;  </span><span style="box-sizing: border-box; line-height: 15.6px; background-color: rgb(247, 247, 247);">//写入赞数&nbsp;</span></li><li style="box-sizing: border-box;"><span style="box-sizing: border-box;">&nbsp;&nbsp;&nbsp;&nbsp;$dsql-<span class="tag" style="box-sizing: border-box;">&gt;</span><span style="box-sizing: border-box;">ExecuteNoneQuery(&quot;update&nbsp;dede_archives&nbsp;set&nbsp;</span><span class="attribute" style="box-sizing: border-box;">zan</span><span class="attribute-value" style="box-sizing: border-box;">zan</span><span style="box-sizing: border-box;">=zan+1&nbsp;where&nbsp;</span><span class="attribute" style="box-sizing: border-box;">id</span><span style="box-sizing: border-box;">=</span><span class="attribute-value" style="box-sizing: border-box;">'$id'</span><span style="box-sizing: border-box;">;&nbsp;&quot;);</span></span></li><li class="alt" style="box-sizing: border-box; color: rgb(255, 255, 255);"><span style="box-sizing: border-box;">&nbsp;&nbsp;&nbsp;&nbsp;<span style="box-sizing: border-box; line-height: 15.6px; background-color: rgb(247, 247, 247);">//写入IP,及被赞的AID&nbsp;&nbsp;</span>&nbsp;</span></li><li style="box-sizing: border-box;"><span style="box-sizing: border-box;">&nbsp;&nbsp;&nbsp;&nbsp;$dsql-<span class="tag" style="box-sizing: border-box;">&gt;</span><span style="box-sizing: border-box;">ExecuteNoneQuery(&quot;insert&nbsp;into&nbsp;dede_zan&nbsp;(aid,ip)&nbsp;values&nbsp;('$id','$ip');&nbsp;&quot;);</span></span></li><li class="alt" style="box-sizing: border-box; color: rgb(255, 255, 255);"><span style="box-sizing: border-box;">&nbsp;&nbsp;  </span><span style="box-sizing: border-box; line-height: 15.6px; background-color: rgb(247, 247, 247);">//获取被赞的数量&nbsp;</span></li><li style="box-sizing: border-box;"><span style="box-sizing: border-box;">&nbsp;&nbsp;&nbsp;&nbsp;$<span class="attribute" style="box-sizing: border-box;">rows</span><span style="box-sizing: border-box;">&nbsp;=&nbsp;$dsql-</span><span class="tag" style="box-sizing: border-box;">&gt;</span><span style="box-sizing: border-box;">GetOne(&quot;Select&nbsp;zan&nbsp;&nbsp;from&nbsp;dede_archives&nbsp;where&nbsp;</span><span class="attribute" style="box-sizing: border-box;">id</span><span style="box-sizing: border-box;">=</span><span class="attribute-value" style="box-sizing: border-box;">'&quot;.$id.&quot;'</span><span style="box-sizing: border-box;">&quot;);</span></span></li><li class="alt" style="box-sizing: border-box; color: rgb(255, 255, 255);"><span style="box-sizing: border-box;">&nbsp;&nbsp;&nbsp;&nbsp;$<span class="attribute" style="box-sizing: border-box;">zan</span><span style="box-sizing: border-box;">&nbsp;=&nbsp;$rows['zan'];&nbsp;//获取赞数值&nbsp;&nbsp;</span></span></li><li style="box-sizing: border-box;"><span style="box-sizing: border-box;">&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;$zan;&nbsp;&nbsp;</span></li><li class="alt" style="box-sizing: border-box; color: rgb(255, 255, 255);"><span style="box-sizing: border-box;">}else{&nbsp;&nbsp;</span></li><li style="box-sizing: border-box;"><span style="box-sizing: border-box;">&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;&quot;赞过了..&quot;;&nbsp;&nbsp;</span></li><li class="alt" style="box-sizing: border-box; color: rgb(255, 255, 255);"><span style="box-sizing: border-box;">}&nbsp;</span></li></ol></pre>
<p style="box-sizing: border-box; margin: 0px 0px 30px; text-indent: 30px; color: rgb(85, 85, 85); font-family: 'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 16px; line-height: 27px;"><span style="box-sizing: border-box; color: rgb(51, 51, 51); font-family: arial, 宋体, sans-serif, 'Microsoft YaHei', tahoma; line-height: 24px; background-color: rgb(247, 252, 248);">好了,点赞功能开发好了。</span></p>
      <div class="postcopyright">
        <p><strong>版权保护: </strong>转载请保留链接: <a href="http://127.0.0.4/cms/9.html" title="dede简单点赞功能开发"> http://127.0.0.4/cms/9.html</a></p>
      </div>
      <div class="bdsharebuttonbox"><a href="#" class="bds_more" data-cmd="more"></a><a href="#" class="bds_qzone" data-cmd="qzone" title="分享到QQ空间"></a><a href="#" class="bds_tsina" data-cmd="tsina" title="分享到新浪微博"></a><a href="#" class="bds_tqq" data-cmd="tqq" title="分享到腾讯微博"></a><a href="#" class="bds_renren" data-cmd="renren" title="分享到人人网"></a><a href="#" class="bds_weixin" data-cmd="weixin" title="分享到微信"></a></div>
      <script>window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"2","bdMiniList":["mshare","qzone","tsina","bdysc","weixin","renren","tqq","tieba","douban","bdhome","sqq","mail","copy","print"],"bdPic":"","bdStyle":"1","bdSize":"24"},"share":{}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];</script> 
    </div>
    <div class="clear"></div>
    <div class="con_pretext">
      <ul>
        <li class="first">上一篇：<a href='/cms/8.html'>dede去后台验证码</a>  </li>
        <li class="last">下一篇：<a href='/cms/10.html'>Html技巧-简单的把Table转成Div</a> </li>
      </ul>
    </div>
    <div class="clear"></div>
  </div>
  
<div class="sider">
  <div class="right">
    <div class="author" style="margin-bottom:20px">
      <div class="topauthor"> <img alt="" src="/html5_blue/images/avatar.jpeg" class="avatar avatar-100 photo" height="100" width="100"> <span class="intag">博客主人</span><span class="names">AB模板网</span></br>
        <span class="talk"> 男，文化程度不高性格有点犯二，已经20来岁至今未婚，闲着没事喜欢研究各种代码，资深技术宅。 </span> </div>
      <span class="bot"></span> </div>
    
    <div class="subblock"> <img src="/html5_blue/images/3cd871e89f2f6eb8a3a032653a4f8018.jpg"> </div>
    <div class="subblock">
      <h3>推荐文章</h3>
      <ul>
        <li>
          <div class="sideshow"><a href="/News/1.html" target="_ablank"  title="如果没有略缩图，就不会显示前面的图片！"> <img width='80' height='60' src='/uploads/170530/1-1F5301S915S8.gif' class='icon wp-post-image' alt='如果没有略缩图，就不会显示前面的图片！' title='如果没有略缩图，就不会显示前面的图片！' /> </a> <a href="/News/1.html" target="_ablank"  title="如果没有略缩图，就不会显示前面的图片！"> 如果没有略缩图，就不会显示前面的图片！ </a> <span class="datetime"> 2017/05/30 </span> </div>
        </li>
<li>
          <div class="sideshow"><a href="/News/2.html" target="_ablank"  title="这个没有略缩图，不会显示前面的图片！">  </a> <a href="/News/2.html" target="_ablank"  title="这个没有略缩图，不会显示前面的图片！"> 这个没有略缩图，不会显示前面的图片！ </a> <span class="datetime"> 2016/06/05 </span> </div>
        </li>
<li>
          <div class="sideshow"><a href="/cms/12.html" target="_ablank"  title="Dede两句代码增加自定义属性">  </a> <a href="/cms/12.html" target="_ablank"  title="Dede两句代码增加自定义属性"> Dede两句代码增加自定义属性 </a> <span class="datetime"> 2016/06/05 </span> </div>
        </li>
<li>
          <div class="sideshow"><a href="/cms/11.html" target="_ablank"  title="Dede简单搬家">  </a> <a href="/cms/11.html" target="_ablank"  title="Dede简单搬家"> Dede简单搬家 </a> <span class="datetime"> 2016/06/05 </span> </div>
        </li>
<li>
          <div class="sideshow"><a href="/cms/10.html" target="_ablank"  title="Html技巧-简单的把Table转成Div">  </a> <a href="/cms/10.html" target="_ablank"  title="Html技巧-简单的把Table转成Div"> Html技巧-简单的把Table转成Div </a> <span class="datetime"> 2016/06/05 </span> </div>
        </li>

      </ul>
    </div>
    <div class="subblock"> <img src="/html5_blue/images/3cd871e89f2f6eb8a3a032653a4f8018.jpg"> </div>
    <div class="subblock">
      <h3>热门文章</h3>
      <ul>
        <li>
          <div class="sideshow"><a href="/News/1.html" target="_ablank"  title="如果没有略缩图，就不会显示前面的图片！"> <img width='80' height='60' src='/uploads/170530/1-1F5301S915S8.gif' class='icon wp-post-image' alt='如果没有略缩图，就不会显示前面的图片！' title='如果没有略缩图，就不会显示前面的图片！' /> </a> <a href="/News/1.html" target="_ablank"  title="如果没有略缩图，就不会显示前面的图片！"> 如果没有略缩图，就不会显示前面的图片！ </a> <span class="datetime"> 2017/05/30 </span> </div>
        </li>
<li>
          <div class="sideshow"><a href="/News/2.html" target="_ablank"  title="这个没有略缩图，不会显示前面的图片！">  </a> <a href="/News/2.html" target="_ablank"  title="这个没有略缩图，不会显示前面的图片！"> 这个没有略缩图，不会显示前面的图片！ </a> <span class="datetime"> 2016/06/05 </span> </div>
        </li>
<li>
          <div class="sideshow"><a href="/cms/12.html" target="_ablank"  title="Dede两句代码增加自定义属性">  </a> <a href="/cms/12.html" target="_ablank"  title="Dede两句代码增加自定义属性"> Dede两句代码增加自定义属性 </a> <span class="datetime"> 2016/06/05 </span> </div>
        </li>
<li>
          <div class="sideshow"><a href="/cms/11.html" target="_ablank"  title="Dede简单搬家">  </a> <a href="/cms/11.html" target="_ablank"  title="Dede简单搬家"> Dede简单搬家 </a> <span class="datetime"> 2016/06/05 </span> </div>
        </li>
<li>
          <div class="sideshow"><a href="/cms/10.html" target="_ablank"  title="Html技巧-简单的把Table转成Div">  </a> <a href="/cms/10.html" target="_ablank"  title="Html技巧-简单的把Table转成Div"> Html技巧-简单的把Table转成Div </a> <span class="datetime"> 2016/06/05 </span> </div>
        </li>

      </ul>
    </div>
    <div class="subblock"> <img src="/html5_blue/images/3cd871e89f2f6eb8a3a032653a4f8018.jpg"> </div>
    
    <div class="subblock linkcat">
      <h3>友情链接</h3>
      <ul>
        
        <li><a href='http://www.adminbuy.cn/' target='_blank'>织梦模板</a> </li>
        
        <li><a href='http://www.adminbuy.cn/' target='_blank'>织梦源码</a> </li>
        
        <li><a href='http://www.adminbuy.cn/' target='_blank'>网站模板</a> </li>
        
        <li><a href='http://www.adminbuy.cn/' target='_blank'>网站源码</a> </li>
        
        <li><a href='http://www.adminbuy.cn/' target='_blank'>模板王</a> </li>
        
        <li><a href='http://www.adminbuy.cn/' target='_blank'>手机网站模板</a> </li>
        
      </ul>
    </div>
    <ul class="widgets">
    </ul>
  </div>
</div>
 </div>
<div class="clear"></div>
﻿<div class="footer">
  <div class="wrap">
    <div class="group">
      <h3>关于本站</h3>
      <p>网站描述</p>
    </div>
    <div class="group">
      <h3>联系我</h3>
      <p>
      <li>AB模板网</li>
      <li>QQ:9490489</li>
      </p>
    </div>
    <div class="group">
      <h3>特别鸣谢</h3>
      <p>
      <li><span><a href="http://www.adminbuy.cn/" target="_blank">AB模板网</a></span></li>
      </p>
    </div>
    <div class="clear"></div>
    <p class="ffooter">Copyright &copy; Www.AdminBuy.Cn 版权所有 <a href=http://www.dedecms.com target='_blank'>Power by DedeCms</a> | 苏ICP12345678  </p>
  </div>
</div>

</body>
</html>